# 如何在zabbix触发器名称的里加上当前trigger的最新值(或自定义变量)

| 参数                                 | 描述                                                         |
| ------------------------------------ | ------------------------------------------------------------ |
| *Name*                               | 触发器名称 名称可以包含支持宏变量: {HOST.HOST}, {HOST.NAME}, {HOST.CONN}, {HOST.DNS}, {HOST.IP}, {ITEM.VALUE}, {ITEM.LASTVALUE} and \{$MACRO\}.                         \$1,\$2…\$9 宏可以被关联表达式                                                                                                                          实例: 名字 Processor load above \$1 on {HOST.NAME} 表达式: {New host:system.cpu.load[percpu,avg1].last()}>5 会显示为 Processor load above 5 on New host |
| *Expression*                         | 逻辑表达式用于计算触发器状态                                 |
| *Multiple PROBLEM events generation* | 可以通过这个参数,在触发器产生Problem时触发一个事件           |
| *Description*                        | 描述更多信息关于触发器的作用,包含修复problem说明等细节.      |
| *URL*                                | 在Monitoring → Triggers中，可以看到URL并且可以点击，一般情况下他需要配合触发器ID来使用，在url中包含触发器ID（宏变量 {[TRIGGER.ID](http://trigger.id/)}），这样可以直接点击到具体触发器中。 |
| *Severity*                           | 设置严重级别.                                                |
| *Enabled*                            | 设置是否启用trigger                                          |





官方文档如下:



> ### 1 配置一个触发器
>
>
>
> #### 概述
>
> 配置一个触发器，请执行以下操作：
>
> - 点击Zabbix上方菜单栏的*Configuration* → *Hosts*
> - 在Host那一行点击*Triggers*
> - 在右上角点击*Create Trigger*（或者在触发器名称上编辑一个现有的触发器）
> - 在打开的页面输入触发器的参数
>
> #### 配置
>
> **Trigger**标签页包含了所有必需的触发器属性。
>
> [![img](https://www.zabbix.com/documentation/3.4/_media/zh/manual/config/triggers/trigger.png)](https://www.zabbix.com/documentation/3.4/_detail/zh/manual/config/triggers/trigger.png?id=zh%3Amanual%3Aconfig%3Atriggers%3Atrigger)
>
> | 参数                  | 描述                                                         |
> | --------------------- | ------------------------------------------------------------ |
> | *Name*                | 触发器名称。 这个名称可能包含支持的[macros](https://www.zabbix.com/documentation/3.4/manual/appendix/macros/supported_by_location):`{HOST.HOST}, {HOST.NAME}, {HOST.CONN}, {HOST.DNS}, {HOST.IP}, {ITEM.VALUE},{ITEM.LASTVALUE}` 和 `{$MACRO}`。 **$1, $2…$9**宏可以用来指代第一、第二至第九个表达式的常量。 *备注*：$1-$9如果引用了相对简单的常量或易懂的表达式，宏将会正确解析。例如，如果表达式为{New host:system.cpu.load[percpu,avg1].last()}>5，则名为“Processor load above $1 on {HOST.NAME}“的触发器名称将自动更改为”Processor load above 5 on New host” |
> | *Severity*            | 通过点击对应的按钮来设置所需的触发器[severity](https://www.zabbix.com/documentation/3.4/zh/manual/config/triggers/severity) |
> | *Problem expression*  | 用于定义问题条件的逻辑[expression](https://www.zabbix.com/documentation/3.4/zh/manual/config/triggers/expression)。 |
> | *OK event generation* | OK event generation选项：\\**Expression** - OK events are generated based on the same expression as problem events; **Recovery expression** - OK events are generated if the recovery expression evaluates to TRUE **and** the problem expression evaluates to FALSE; **None** - in this case the trigger will never return to an OK state on its own. Supported since Zabbix 3.2.0. |
> | *Recovery expression* | Logical [expression](https://www.zabbix.com/documentation/3.4/zh/manual/config/triggers/expression) used to define the conditions when the problem is resolved. This field is optional and only available if 'Recovery expression' is selected for *OK event generation*. Supported since Zabbix 3.2.0. |
> | *Tag for matching*    | Enter event tag name to use for event correlation. This field is displayed if 'All problems if tag values match' is selected for the *OK event closes* property and is mandatory in this case. Supported since Zabbix 3.2.0. |
> | *Tags*                | Set custom tags to mark trigger events. [Event tags](https://www.zabbix.com/documentation/3.4/manual/config/triggers/event_tags) can be used for event correlation, in action conditions and will also be seen in *Monitoring* → *Problems*. Tags are a pair of tag name and value. You can use only the name or pair it with a value. User macros, user macro context, low-level discovery macros and macro [functions](https://www.zabbix.com/documentation/3.4/manual/config/macros/macro_functions): `{{ITEM.VALUE}.regsub(pattern, output)}, {{ITEM.VALUE}.iregsub(pattern, output)}` are supported in event tags. Low-level discovery macros can be used inside macro context. If the total length of expanded value exceeds 255, it will be cut to 255 characters. Supported since Zabbix 3.2.0. |
> | *Allow manual close*  | Check to allow [manual closing](https://www.zabbix.com/documentation/3.4/manual/config/events/manual_close) of problem events generated by this trigger. Manual closing is possible when acknowledging problem events. This field is available if event acknowledgement is activated in *Administration* → *General*.  Supported since Zabbix 3.2.0. |
> | *URL*                 | 如果此处不为空，则在此处输入的URL可在点击*Monitoring → Triggers*的trigger name的时候链接于此。 可以在触发器URL字段 - {TRIGGER.ID}, 多个[{HOST.*}](https://www.zabbix.com/documentation/3.4/manual/appendix/macros/supported_by_location)宏（Zabbix3.0.0以后的版本）和用户宏（Zabbix3.0.0以后的版本）中使用宏。 |
> | *Description*         | 文本字段用来提供更多关于触发器的信息。可能包含修复特定问题的说明、相关负责人的联系方式等。 *从Zabbix2.2开始*，描述可能包含与触发器名称相同的一组宏。 |
> | *Enabled*             | 如果需要，取消选中此框将禁用触发器。                         |
>
> **Dependencies**标签页包含触发器的所有[dependencies](https://www.zabbix.com/documentation/3.4/zh/manual/config/triggers/dependencies)。
>
> 点击*Add*来添加一个新的依赖关系。



## 例子

![](H:\桌面\study-video-cutpicture\触发器名字带变量设置.png)



这是之后的触发的效果

![](H:\桌面\study-video-cutpicture\zabbix触发器带变量触发效果显示.png)